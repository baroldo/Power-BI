DynamicCumulativeMarginPercent = 
VAR CurrentPercentile = MAX('PercentileAxis'[Value])

-- Get the current filtered table context (includes slicers, category, etc.)
VAR RankedTable =
    ADDCOLUMNS(
        ALLSELECTED('YourTable'),
        "CustomerPercentile",
        ROUND(
            DIVIDE(
                RANKX(
                    ALLSELECTED('YourTable'),
                    CALCULATE(SUM('YourTable'[MARGIN_$])),
                    ,
                    DESC,
                    Dense
                ),
                COUNTROWS(ALLSELECTED('YourTable'))
            ) * 100,
            0
        )
    )

-- Calculate cumulative margin up to current percentile
VAR CumulativeMargin =
    SUMX(
        FILTER(RankedTable, [CustomerPercentile] <= CurrentPercentile),
        'YourTable'[MARGIN_$]
    )

-- Total margin within visual context
VAR TotalMargin =
    CALCULATE(SUM('YourTable'[MARGIN_$]), ALLSELECTED('YourTable'))

RETURN
    DIVIDE(CumulativeMargin, TotalMargin)